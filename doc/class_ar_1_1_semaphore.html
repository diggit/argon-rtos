<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Argon RTOS: Ar::Semaphore Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Argon RTOS
   &#160;<span id="projectnumber">1.3.0</span>
   </div>
   <div id="projectbrief">Tiny embedded real-time kernel</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_ar_1_1_semaphore.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_ar_1_1_semaphore-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Ar::Semaphore Class Reference<div class="ingroups"><a class="el" href="group__ar.html">Argon RTOS</a> &raquo; <a class="el" href="group__ar__sem.html">Semaphores</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="ar__classes_8h_source.html">ar_classes.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for Ar::Semaphore:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_ar_1_1_semaphore__inherit__graph.png" border="0" usemap="#_ar_1_1_semaphore_inherit__map" alt="Inheritance graph"/></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<div class="textblock"><p>Counting semaphore class. </p>
<dl class="section see"><dt>See also</dt><dd>Semaphore::Guard </dd></dl>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for Ar::Semaphore:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_ar_1_1_semaphore__coll__graph.png" border="0" usemap="#_ar_1_1_semaphore_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a57abaf9f6ba62397a937db15e1e7a8d1"><td class="memItemLeft" align="right" valign="top"><a id="a57abaf9f6ba62397a937db15e1e7a8d1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ar_1_1_semaphore.html#a57abaf9f6ba62397a937db15e1e7a8d1">Semaphore</a> ()</td></tr>
<tr class="memdesc:a57abaf9f6ba62397a937db15e1e7a8d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor. <br /></td></tr>
<tr class="separator:a57abaf9f6ba62397a937db15e1e7a8d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bed419f3c2b61da408f2bd9485587e4"><td class="memItemLeft" align="right" valign="top"><a id="a5bed419f3c2b61da408f2bd9485587e4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ar_1_1_semaphore.html#a5bed419f3c2b61da408f2bd9485587e4">Semaphore</a> (const char *name, unsigned count=1)</td></tr>
<tr class="memdesc:a5bed419f3c2b61da408f2bd9485587e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. <br /></td></tr>
<tr class="separator:a5bed419f3c2b61da408f2bd9485587e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08e83c016cb62897bf48deb974367c22"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ar_1_1_semaphore.html#a08e83c016cb62897bf48deb974367c22">~Semaphore</a> ()</td></tr>
<tr class="memdesc:a08e83c016cb62897bf48deb974367c22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a08e83c016cb62897bf48deb974367c22">More...</a><br /></td></tr>
<tr class="separator:a08e83c016cb62897bf48deb974367c22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a509fcfc366cba4a45237619e57bbf856"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ar.html#gac7fd2dafb7c0b2dfd03e84537ebb3b16">ar_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ar_1_1_semaphore.html#a509fcfc366cba4a45237619e57bbf856">get</a> (uint32_t timeout=<a class="el" href="group__ar.html#gga7d3f0ad0bcc755713601ba6edb75dd0faef3a89f97ff0d9f673394d645f9baf43">kArInfiniteTimeout</a>)</td></tr>
<tr class="memdesc:a509fcfc366cba4a45237619e57bbf856"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire the semaphore.  <a href="#a509fcfc366cba4a45237619e57bbf856">More...</a><br /></td></tr>
<tr class="separator:a509fcfc366cba4a45237619e57bbf856"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a721b782a780ee65c5e81e6a64ad4682e"><td class="memItemLeft" align="right" valign="top"><a id="a721b782a780ee65c5e81e6a64ad4682e"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ar_1_1_semaphore.html#a721b782a780ee65c5e81e6a64ad4682e">getCount</a> () const</td></tr>
<tr class="memdesc:a721b782a780ee65c5e81e6a64ad4682e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current semaphore count. <br /></td></tr>
<tr class="separator:a721b782a780ee65c5e81e6a64ad4682e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae25c970e02560db4df928288feddeca7"><td class="memItemLeft" align="right" valign="top"><a id="ae25c970e02560db4df928288feddeca7"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ar_1_1_semaphore.html#ae25c970e02560db4df928288feddeca7">getName</a> () const</td></tr>
<tr class="memdesc:ae25c970e02560db4df928288feddeca7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the semaphore's name. <br /></td></tr>
<tr class="separator:ae25c970e02560db4df928288feddeca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b8cb5a9a0fb901c92bb625ccc058275"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ar.html#gac7fd2dafb7c0b2dfd03e84537ebb3b16">ar_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ar_1_1_semaphore.html#a6b8cb5a9a0fb901c92bb625ccc058275">init</a> (const char *name, unsigned count=1)</td></tr>
<tr class="memdesc:a6b8cb5a9a0fb901c92bb625ccc058275"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialiser.  <a href="#a6b8cb5a9a0fb901c92bb625ccc058275">More...</a><br /></td></tr>
<tr class="separator:a6b8cb5a9a0fb901c92bb625ccc058275"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63bee79b3e167a14fc792fe1dffcaa38"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ar.html#gac7fd2dafb7c0b2dfd03e84537ebb3b16">ar_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ar_1_1_semaphore.html#a63bee79b3e167a14fc792fe1dffcaa38">put</a> ()</td></tr>
<tr class="memdesc:a63bee79b3e167a14fc792fe1dffcaa38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the semaphore.  <a href="#a63bee79b3e167a14fc792fe1dffcaa38">More...</a><br /></td></tr>
<tr class="separator:a63bee79b3e167a14fc792fe1dffcaa38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a08e83c016cb62897bf48deb974367c22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08e83c016cb62897bf48deb974367c22">&#9670;&nbsp;</a></span>~Semaphore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Ar::Semaphore::~Semaphore </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>
<p>Any threads on the blocked list will be unblocked immediately. Their return status from the <a class="el" href="class_ar_1_1_semaphore.html#a509fcfc366cba4a45237619e57bbf856" title="Acquire the semaphore. ">get()</a> method will be <a class="el" href="group__ar.html#ggac7fd2dafb7c0b2dfd03e84537ebb3b16af518c0f2c311f3b3a697362fa8cb3213" title="An object was deleted while a thread was blocked on it. This may be a semaphore, mutex, or queue. ">kArObjectDeletedError</a>. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a509fcfc366cba4a45237619e57bbf856"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a509fcfc366cba4a45237619e57bbf856">&#9670;&nbsp;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ar.html#gac7fd2dafb7c0b2dfd03e84537ebb3b16">ar_status_t</a> Ar::Semaphore::get </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em> = <code><a class="el" href="group__ar.html#gga7d3f0ad0bcc755713601ba6edb75dd0faef3a89f97ff0d9f673394d645f9baf43">kArInfiniteTimeout</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Acquire the semaphore. </p>
<p>The semaphore count is decremented. If the count is 0 upon entering this method then the caller thread is blocked until the count reaches 1. Threads are unblocked in the order in which they were blocked. Priority is not taken into consideration, so priority inversions are possible.</p>
<dl class="section note"><dt>Note</dt><dd>This function may be called from interrupt context only if the timeout parameter is set to <a class="el" href="group__ar.html#gga7d3f0ad0bcc755713601ba6edb75dd0faebad57d4b63a3223bf2391cb51433c4e" title="Return immediately if a resource cannot be acquired. ">kArNoTimeout</a> (or 0).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>The maximum number of milliseconds that the caller is willing to wait in a blocked state before the semaphore can be obtained. If this value is 0, or <a class="el" href="group__ar.html#gga7d3f0ad0bcc755713601ba6edb75dd0faebad57d4b63a3223bf2391cb51433c4e" title="Return immediately if a resource cannot be acquired. ">kArNoTimeout</a>, then this method will return immediately if the semaphore cannot be obtained. Setting the timeout to <a class="el" href="group__ar.html#gga7d3f0ad0bcc755713601ba6edb75dd0faef3a89f97ff0d9f673394d645f9baf43" title="Pass this value to wait forever to acquire a resource. ">kArInfiniteTimeout</a> will cause the thread to wait forever for a chance to get the semaphore.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__ar.html#ggac7fd2dafb7c0b2dfd03e84537ebb3b16a27e178199a575e82a814a560385d64f5" title="Operation was successful. ">kArSuccess</a></td><td>The semaphore was obtained without error. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__ar.html#ggac7fd2dafb7c0b2dfd03e84537ebb3b16a724599f24c4a827db763f0725ffd8240" title="Timeout while blocked on an object. ">kArTimeoutError</a></td><td>The specified amount of time has elapsed before the semaphore could be obtained. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__ar.html#ggac7fd2dafb7c0b2dfd03e84537ebb3b16af518c0f2c311f3b3a697362fa8cb3213" title="An object was deleted while a thread was blocked on it. This may be a semaphore, mutex, or queue. ">kArObjectDeletedError</a></td><td>Another thread deleted the semaphore while the caller was blocked on it. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__ar.html#ggac7fd2dafb7c0b2dfd03e84537ebb3b16afb32994e43a0e17af35046160b1733b3" title="The requested operation cannot be performed from interrupt context. ">kArNotFromInterruptError</a></td><td>A non-zero timeout is not alllowed from the interrupt context. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6b8cb5a9a0fb901c92bb625ccc058275"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b8cb5a9a0fb901c92bb625ccc058275">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ar.html#gac7fd2dafb7c0b2dfd03e84537ebb3b16">ar_status_t</a> Ar::Semaphore::init </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>count</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialiser. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Pass a name for the semaphore. If NULL is passed the name will be set to an empty string. </td></tr>
    <tr><td class="paramname">count</td><td>The initial semaphore count. Setting this value to 0 will cause the first call to <a class="el" href="class_ar_1_1_semaphore.html#a509fcfc366cba4a45237619e57bbf856" title="Acquire the semaphore. ">get()</a> to block until <a class="el" href="class_ar_1_1_semaphore.html#a63bee79b3e167a14fc792fe1dffcaa38" title="Release the semaphore. ">put()</a> is called. A value of 1 or greater will allow that many calls to <a class="el" href="class_ar_1_1_semaphore.html#a509fcfc366cba4a45237619e57bbf856" title="Acquire the semaphore. ">get()</a> to succeed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__ar.html#ggac7fd2dafb7c0b2dfd03e84537ebb3b16a27e178199a575e82a814a560385d64f5" title="Operation was successful. ">kArSuccess</a></td><td><a class="el" href="class_ar_1_1_semaphore.html" title="Counting semaphore class. ">Semaphore</a> initialised successfully. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a63bee79b3e167a14fc792fe1dffcaa38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63bee79b3e167a14fc792fe1dffcaa38">&#9670;&nbsp;</a></span>put()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ar.html#gac7fd2dafb7c0b2dfd03e84537ebb3b16">ar_status_t</a> Ar::Semaphore::put </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release the semaphore. </p>
<p>The semaphore count is incremented.</p>
<dl class="section note"><dt>Note</dt><dd>This call is safe from interrupt context.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__ar.html#ggac7fd2dafb7c0b2dfd03e84537ebb3b16a27e178199a575e82a814a560385d64f5" title="Operation was successful. ">kArSuccess</a></td><td>The semaphore was released without error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_ar.html">Ar</a></li><li class="navelem"><a class="el" href="class_ar_1_1_semaphore.html">Semaphore</a></li>
    <li class="footer">Generated on Sat Apr 7 2018 15:03:03 for Argon RTOS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
